<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SCM Case Study on Alcohol Consumption • SCtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SCM Case Study on Alcohol Consumption">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SCtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/case-study.html">SCM Case Study on Alcohol Consumption</a>
    </li>
    <li>
      <a href="../articles/replicating-basque.html">Replicating the Basque Study</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>SCM Case Study on Alcohol Consumption</h1>
            
      
      
      <div class="hidden name"><code>case-study.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Synthetic control provides a powerful approach at establishing a counterfactual for policy changes. One such example of a policy change is in Russian surrounding alcohol consumption. A recent Guardian article<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> chronicled the fall of alcohol consumption in Russia based policy changes made by Mr Putin’s governments. These policy changes all occurred roughly around 2003 and included reclassifying what counted as a “foodstuff” and levying of hefty taxes on alcohol. Based on recent trends, observers say that these policies are having the desired effect. But how much of this drop in alcohol consumption is due to the policy implementation and not changes in consumer preference?<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<p>This underlines the need for a counterfactual. We would like to know what <em>would have been</em> the alcohol consumption in Russia but for these policy changes. Here is where Synthetic Control (and the SCtools package) can help us answer these questions.</p>
</div>
<div id="implementing-synthetic-controls" class="section level1">
<h1 class="hasAnchor">
<a href="#implementing-synthetic-controls" class="anchor"></a>Implementing Synthetic Controls</h1>
<p>In order to understand the policy impact on Russian Alcohol Consumption, we will first load the SCtools, Synth, and some of the tidyverse packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(SCtools)
<span class="co">#&gt; Loading required package: future</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(Synth)
<span class="co">#&gt; ##</span>
<span class="co">#&gt; ## Synth Package: Implements Synthetic Control Methods.</span>
<span class="co">#&gt; ## See http://www.mit.edu/~jhainm/software.htm for additional information.</span>
<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>())</code></pre></div>
<p>After those are loaded, we can look at the <code>alcohol</code> data that is inside of the <code>SCtools</code> package. We can build the graphic in the Guardian using these data to see the trend in alcohol consumption.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">alcohol <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(country_name <span class="op">==</span><span class="st"> "Russian Federation"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(year, consumption))<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>()<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span>(<span class="dt">xintercept =</span> <span class="dv">2003</span>, <span class="dt">color  =</span> <span class="st">"orange"</span>)<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(
        <span class="dt">title =</span> <span class="st">"Per Capita Alcohol Consumption in the Russian Federation Since 1990"</span>,
        <span class="dt">subtitle =</span> <span class="st">"The Russian government began a series of policy changes in 2003</span><span class="ch">\n</span><span class="st">to reduce alcohol consumption"</span>,
        <span class="dt">y =</span> <span class="st">"Per Capita Consumption (L/person)"</span>,
        <span class="dt">x =</span> <span class="ot">NULL</span>,
        <span class="dt">caption =</span> <span class="st">"Data: World Health Organization"</span>
    )</code></pre></div>
<div class="figure" style="text-align: center">
<img src="case-study_files/figure-html/russia-graph-1.png" alt="Trend of Alcohol Consumption in Russia" width="672"><p class="caption">
Trend of Alcohol Consumption in Russia
</p>
</div>
<p>We can also examine some of the trends in our predictors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">alcohol <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(country_name <span class="op">==</span><span class="st"> "Russian Federation"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(year, consumption,labor_force_participation_rate<span class="op">:</span>manufacturing) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>(predictor, value, <span class="op">-</span>year) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(year, value))<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>()<span class="op">+</span>
<span class="st">        </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span>predictor, <span class="dt">scales =</span> <span class="st">"free"</span>)</code></pre></div>
<div class="figure" style="text-align: center">
<img src="case-study_files/figure-html/unnamed-chunk-3-1.png" alt="Trends in Predictors in Russian Federation" width="672"><p class="caption">
Trends in Predictors in Russian Federation
</p>
</div>
<p>One feature of SCM is selecting donor states. These donor states help us to generate our synthetic control (synthetic version of Russian in the absence of the policy change). There are several key assumptions regarding choosing donor states including</p>
<ul>
<li>No spillover effects (e.g. the policy change in Russia did not cause a huge migration of drinkers to another country, did not change trade patterns, etc)</li>
<li>Donor states do not enact similar policies</li>
</ul>
<p>In the absence of evidence of other changes in other states, we can look at the potential donor states graphically:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span>alcohol <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">my_color =</span> <span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(country_code <span class="op">==</span><span class="st"> "RUS"</span>, <span class="st">"Russia"</span>, <span class="st">"Other"</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(year, consumption, <span class="dt">group =</span> country_code, <span class="dt">color =</span> my_color))<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"grey"</span>, <span class="st">"black"</span>, <span class="st">"white"</span>))<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span>(<span class="dv">5</span>,<span class="dv">15</span>)<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span>(<span class="dv">1990</span>,<span class="dv">2002</span>)
p1
<span class="co">#&gt; Warning: Removed 4208 rows containing missing values (geom_path).</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="case-study_files/figure-html/unnamed-chunk-4-1.png" alt="Review of Possible Donors" width="480"><p class="caption">
Review of Possible Donors
</p>
</div>
<p>When we look at the potential donors we see the usual suspects: France, United States, as well as some of the neighbouring Baltic states. This makes some intuitive sense. Baltic states share similar cultural habits. SCM is insensitive to having donors that are not neighbouring, which will allow us to include countries like Great Britain and the United States in the donor pool.<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a></p>
<div id="experimental-design" class="section level2">
<h2 class="hasAnchor">
<a href="#experimental-design" class="anchor"></a>Experimental Design</h2>
<p>Now that we have an idea of the donors, we can build the pool.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">comparison_states &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"USA"</span>, <span class="st">"UK"</span>, <span class="st">"UKR"</span>, <span class="st">"KAZ"</span>,
                                             <span class="st">"GBR"</span>, <span class="st">"ESP"</span>, <span class="st">"DEU"</span>, <span class="st">"POL"</span>,
                                             <span class="st">"FIN"</span>, <span class="st">"FRA"</span>, <span class="st">"GRC"</span>, <span class="st">"IRL"</span>,
                                             <span class="st">"LTU"</span>, <span class="st">"ROU"</span>, <span class="st">"GEO"</span>,
                                             <span class="st">"SWE"</span>, <span class="st">"BEL"</span>, <span class="st">"BLR"</span>)

control_ids &lt;-<span class="st"> </span>alcohol <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(country_code,country_num) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(country_code <span class="op">%in%</span><span class="st"> </span>comparison_states) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(country_num)</code></pre></div>
<p>Now we will use the <code>dataprep</code> function from Synth to format our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dataprep.out&lt;-<span class="kw"><a href="https://rdrr.io/pkg/Synth/man/dataprep.html">dataprep</a></span>(
        <span class="dt">foo =</span> <span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(alcohol),
        <span class="dt">predictors =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"labor_force_participation_rate"</span>,
                       <span class="st">"inflation"</span>,
                       <span class="st">"mobile_cellular_subscriptions"</span>,
                       <span class="st">"manufacturing"</span>),
        <span class="dt">predictors.op =</span> <span class="st">"mean"</span>,
        <span class="dt">dependent =</span> <span class="st">"consumption"</span>,
        <span class="dt">unit.variable =</span> <span class="st">"country_num"</span>,
        <span class="dt">time.variable =</span> <span class="st">"year"</span>,
        <span class="dt">treatment.identifier =</span> <span class="dv">142</span>,
        <span class="dt">controls.identifier =</span> control_ids,
        <span class="dt">time.predictors.prior =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1991</span><span class="op">:</span><span class="dv">2002</span>),
        <span class="dt">time.optimize.ssr =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1994</span><span class="op">:</span><span class="dv">2002</span>),
        <span class="dt">special.predictors =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
      <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"consumption"</span>, <span class="dv">2000</span><span class="op">:</span><span class="dv">2003</span> ,<span class="st">"mean"</span>)),
        <span class="dt">unit.names.variable =</span> <span class="st">"country_code"</span>,
        <span class="dt">time.plot =</span> <span class="dv">1991</span><span class="op">:</span><span class="dv">2015</span>
    )
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: inflation ; for period: 1991 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: inflation ; for period: 1992 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1991 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1992 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1993 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1994 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1995 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1996 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1997 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1998 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 1999 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 2000 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data- treated unit; predictor: manufacturing ; for period: 2001 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data - control unit: 16 ; predictor: inflation ; for period: 1991 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Missing data - control unit: 16 ; predictor: inflation ; for period: 1992 </span>
<span class="co">#&gt;  We ignore (na.rm = TRUE) all missing values for predictors.op.</span></code></pre></div>
<p>There are some missing values, but that should be ok. Now we will run the <code>synth</code> function to generate our synthetic controls.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">out &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/Synth/man/synth.html">synth</a></span>(dataprep.out, <span class="dt">Sigf.ipop =</span> <span class="dv">3</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.6282772 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  2.563e-07 0.006535434 0.01778086 0.006624977 0.9690585 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.2340113 0.01655896 0.009693897 0.2907346 0.05185795 0.01180483 0.02512933 0.001069973 0.07308878 0.1141199 0.04590259 0.03890071 0.01690468 0.01167415 0.02475716 0.01343976 0.02035149</span></code></pre></div>
<p>After running the SCM, we can look at the weights from the donors and see if we see anything that is surprising.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">solution &lt;-<span class="st"> </span>out<span class="op">$</span>solution.w <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>()

solution<span class="op">$</span>country_num &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(solution)

solution <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">country_num =</span> <span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(country_num)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(alcohol <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(country_code,country_num) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(country_code <span class="op">%in%</span><span class="st"> </span>comparison_states) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">        </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(), <span class="dt">by =</span> <span class="st">"country_num"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span>(country_code, w.weight), w.weight))<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>()<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span>()<span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(
        <span class="dt">title =</span> <span class="st">"Donor Weights by Country"</span>,
        <span class="dt">y =</span> <span class="ot">NULL</span>,
        <span class="dt">x =</span> <span class="st">"Weight"</span>
    )</code></pre></div>
<p><img src="case-study_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Unsurprisingly, we can see that France and Belarus contribute the most to counterfactual Russia. Let’s continue with our analysis.</p>
<p>Now we can plot our real Russia vs our Synthetic Russia using the <code>plot.path</code> function from Synth.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/Synth/man/path.plot.html">path.plot</a></span>(<span class="dt">synth.res =</span> out, <span class="dt">dataprep.res =</span> dataprep.out, 
                    <span class="dt">Xlab =</span> <span class="st">"per Capita Alcohol Consumption"</span>)</code></pre></div>
<div class="figure" style="text-align: center">
<img src="case-study_files/figure-html/unnamed-chunk-9-1.png" alt="Synthetic Russia vs Actual Russia for Alcohol Consumption per Capita" width="672"><p class="caption">
Synthetic Russia vs Actual Russia for Alcohol Consumption per Capita
</p>
</div>
<p>We can also look at the delta between our real and synthetic Russia.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">delta_out &lt;-<span class="st"> </span>(dataprep.out<span class="op">$</span>Y1plot <span class="op">-</span><span class="st"> </span>(dataprep.out<span class="op">$</span>Y0plot <span class="op">%*%</span><span class="st"> </span>out<span class="op">$</span>solution.w)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>()

delta_out<span class="op">$</span>year &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(delta_out)

delta_out<span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="dt">caption =</span> <span class="st">"Difference in Alcohol Consumption Between Synthetic and Actual Russia"</span>, <span class="dt">digits =</span> <span class="dv">2</span>)</code></pre></div>
<table class="table">
<caption>Difference in Alcohol Consumption Between Synthetic and Actual Russia</caption>
<thead><tr class="header">
<th></th>
<th align="right">142</th>
<th align="left">year</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1991</td>
<td align="right">-2.57</td>
<td align="left">1991</td>
</tr>
<tr class="even">
<td>1992</td>
<td align="right">-3.02</td>
<td align="left">1992</td>
</tr>
<tr class="odd">
<td>1993</td>
<td align="right">-1.89</td>
<td align="left">1993</td>
</tr>
<tr class="even">
<td>1994</td>
<td align="right">-1.15</td>
<td align="left">1994</td>
</tr>
<tr class="odd">
<td>1995</td>
<td align="right">1.66</td>
<td align="left">1995</td>
</tr>
<tr class="even">
<td>1996</td>
<td align="right">-0.45</td>
<td align="left">1996</td>
</tr>
<tr class="odd">
<td>1997</td>
<td align="right">-0.50</td>
<td align="left">1997</td>
</tr>
<tr class="even">
<td>1998</td>
<td align="right">0.18</td>
<td align="left">1998</td>
</tr>
<tr class="odd">
<td>1999</td>
<td align="right">0.76</td>
<td align="left">1999</td>
</tr>
<tr class="even">
<td>2000</td>
<td align="right">-0.71</td>
<td align="left">2000</td>
</tr>
<tr class="odd">
<td>2001</td>
<td align="right">0.07</td>
<td align="left">2001</td>
</tr>
<tr class="even">
<td>2002</td>
<td align="right">0.05</td>
<td align="left">2002</td>
</tr>
<tr class="odd">
<td>2003</td>
<td align="right">0.68</td>
<td align="left">2003</td>
</tr>
<tr class="even">
<td>2004</td>
<td align="right">0.53</td>
<td align="left">2004</td>
</tr>
<tr class="odd">
<td>2005</td>
<td align="right">0.89</td>
<td align="left">2005</td>
</tr>
<tr class="even">
<td>2006</td>
<td align="right">0.66</td>
<td align="left">2006</td>
</tr>
<tr class="odd">
<td>2007</td>
<td align="right">0.38</td>
<td align="left">2007</td>
</tr>
<tr class="even">
<td>2008</td>
<td align="right">0.12</td>
<td align="left">2008</td>
</tr>
<tr class="odd">
<td>2009</td>
<td align="right">-0.23</td>
<td align="left">2009</td>
</tr>
<tr class="even">
<td>2010</td>
<td align="right">-0.61</td>
<td align="left">2010</td>
</tr>
<tr class="odd">
<td>2011</td>
<td align="right">-1.04</td>
<td align="left">2011</td>
</tr>
<tr class="even">
<td>2012</td>
<td align="right">-0.80</td>
<td align="left">2012</td>
</tr>
<tr class="odd">
<td>2013</td>
<td align="right">-1.13</td>
<td align="left">2013</td>
</tr>
<tr class="even">
<td>2014</td>
<td align="right">-2.04</td>
<td align="left">2014</td>
</tr>
<tr class="odd">
<td>2015</td>
<td align="right">-2.00</td>
<td align="left">2015</td>
</tr>
</tbody>
</table>
<p>It appears that the policy took a while to take effect, with a decrease in alcohol consumed per capita beginning in 2009. However, it must be mentioned that this isn’t the “40%” that the Guardian reports and that one may glean from the WHO graph at first glance.</p>
</div>
</div>
<div id="the-next-steps" class="section level1">
<h1 class="hasAnchor">
<a href="#the-next-steps" class="anchor"></a>The Next Steps</h1>
<p>The next steps in a SCM controls analysis is to permute the data set to understand the sensitivity of our Synthetic controls to assess if the results observed are plausible (e.g. are the results we obtained due from chance, or reflect the true effect). The SCtools provides the <code>generate.placebos</code> function to automate this process. This includes the option to parallelise the operation (which greatly speeds up processing time).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">placebo &lt;-<span class="st"> </span><span class="kw"><a href="../reference/generate.placebos.html">generate.placebos</a></span>(<span class="dt">dataprep.out =</span> dataprep.out,
                             <span class="dt">synth.out =</span> out, <span class="dt">strategy =</span> <span class="st">"multiprocess"</span>)
<span class="co">#&gt; Warning: [ONE-TIME </span><span class="al">WARNING</span><span class="co">] Forked processing ('multicore') is disabled</span>
<span class="co">#&gt; in future (&gt;= 1.13.0) when running R from RStudio, because it is</span>
<span class="co">#&gt; considered unstable. Because of this, plan("multicore") will fall</span>
<span class="co">#&gt; back to plan("sequential"), and plan("multiprocess") will fall back to</span>
<span class="co">#&gt; plan("multisession") - not plan("multicore") as in the past. For more</span>
<span class="co">#&gt; details, how to control forked processing or not, and how to silence this</span>
<span class="co">#&gt; warning in future R sessions, see ?future::supportsMulticore</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.6346733 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.02862749 0.02941927 0.03850882 0.01778673 0.8856577 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  2.946e-07 2.782e-07 1.3135e-06 9.191e-07 1.7076e-06 4.367e-07 0.703655 6.8813e-06 1.53571e-05 1.454e-06 0.06310202 3.188e-07 3.241e-07 0.2332122 6.462e-07 9.128e-07 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.4326461 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  8.09933e-05 0.002921031 0.08988244 0.2276172 0.6794984 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.005610847 0.01983425 6.81107e-05 0.02388655 0.0275093 5.0418e-06 0.1664257 0.01067158 0.01464258 0.03347576 0.01771743 0.615763 0.02794906 0.008263319 0.01074469 0.01743282 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.2045994 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.3264411 0.5167417 0.1215508 0.02070644 0.01455995 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.0001247001 0.02704284 0.0001803032 1.67964e-05 8.72826e-05 0.0006678538 0.2188167 1.35921e-05 5.51075e-05 6.96052e-05 2.7666e-05 0.01408613 0.738587 0.0001380888 8.58046e-05 5.812e-07 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.8614339 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.002817685 0.01558812 0.02438096 0.04113917 0.9160741 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  1.584e-07 5.139e-07 1.914e-07 1.767e-07 8.372e-07 5.1287e-06 0.8434148 2.446e-07 1.6591e-06 3.058e-07 2.293e-07 0.1565747 1.604e-07 1.067e-07 5.309e-07 3.282e-07 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 1.686326 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.02939454 0.001717586 0.04331098 0.01363675 0.9119402 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  1.86e-08 2.8e-08 8.65e-08 3e-09 1.71e-08 8.14e-08 1.1e-09 0.05091035 5.18e-08 9.45e-08 6.51e-08 2.57e-08 3.905e-07 0.9490885 4.49e-08 1.957e-07 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.5231065 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.01165028 0.3719715 0.1283364 6.09654e-05 0.4879808 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.0006140829 0.001852645 0.003104126 0.4163378 0.001454764 0.001854597 0.3286543 0.00164372 0.003055619 0.002118173 0.002827631 0.001866379 0.002647575 0.0006864393 0.01193811 0.2193441 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.2529264 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.007146141 0.07682775 0.8728254 0.004578093 0.03862262 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  7.8889e-06 6e-10 1.9907e-06 3.185e-07 0.1509498 1.872e-07 1.657e-07 1.08836e-05 1.1988e-06 7.605e-07 8.281e-07 0.6809426 0.1679823 0.0001005867 4.04e-07 2.19e-07 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.9454424 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.07037633 6.64812e-05 0.001743469 0.01401853 0.9137952 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.09522161 1.385e-07 7.98e-08 0.9047773 2.21e-08 2.063e-07 6.66e-08 2.8e-08 7.24e-08 6.04e-08 6.62e-08 1.307e-07 4.6e-08 4.51e-08 7.98e-08 4.7e-08 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 1.416579 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.190585 0.06535832 0.6830082 0.06102171 2.67838e-05 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.0009848636 2.5058e-06 1.4243e-06 3.1617e-06 0.6720982 3.0112e-06 2.8539e-06 2.4758e-06 6.273e-06 4.2384e-06 0.3232197 2.5467e-06 1.3713e-06 0.003662852 2.7011e-06 1.7862e-06 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 4.819225 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.3347864 0.3874378 0.07675971 0.2005851 0.0004309598 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.02831584 0.03849668 0.009482737 0.04889186 0.2906207 0.02451184 0.0346236 0.02440554 8.6083e-06 0.2489333 0.1642578 0.03750757 0.007770496 0.01544144 0.01574176 0.01099026 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.09613656 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.2432027 1e-10 0.003087071 0.3310173 0.422693 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.2759816 0.01235376 0.0058279 0.003231082 0.23774 0.005359194 0.3540763 0.005010498 0.005586242 1.38026e-05 0.004017342 0.0115551 0.006137435 0.06169284 0.005640401 0.005776483 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.1888404 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.001133451 0.8239319 0.003229206 0.0009402633 0.1707651 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.05890218 3.6943e-06 6.204e-07 1.21e-08 1.43617e-05 0.2072808 2.6783e-06 2.604e-07 0.2253439 0.3264798 0.1819579 3.1761e-06 8.176e-07 2.9482e-06 3.7393e-06 3.1836e-06 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.2669484 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.0005651288 0.03132278 0.09075331 0.04199237 0.8353664 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.001822432 0.2681641 0.06407905 0.2742249 0.002922097 0.005036144 0.2135837 0.1395972 0.002716815 0.003402495 0.003913972 0.00276296 0.006617932 0.002610721 0.004890561 0.003654894 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.22261 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.334848 0.07788361 0.1014199 1.9715e-06 0.4858466 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  8.92e-08 2.133e-07 0.6907828 1.111e-07 0.309213 1.618e-07 3.073e-07 1.291e-07 8.445e-07 1.721e-07 2.57e-07 1.939e-07 2.048e-07 7.501e-07 2.652e-07 4.126e-07 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.8962722 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  8.92877e-05 3.2888e-06 0.07583035 4.64671e-05 0.9240306 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.1584397 9.44701e-05 0.0001344869 1.03349e-05 0.7452491 5.20426e-05 0.0001730737 4.4353e-06 0.09455099 0.0001480535 0.0003099229 0.0002550735 7.91401e-05 0.000202223 8.09786e-05 0.0002159406 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.2387999 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.3292539 0.1082612 0.4262081 0.009563202 0.1267136 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  0.0002311072 0.0002170448 0.3431786 0.07183252 0.0001078429 0.0001848345 0.0002163214 0.2718373 0.0002515764 0.0003573159 0.0001545021 0.0001775319 0.0002613851 -3.5e-09 0.0001059372 0.3108862 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.02818349 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.01180021 0.4821205 1.17e-08 6.5e-09 0.5060793 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  4.379e-07 4.113e-07 4.6e-07 2.317e-07 6.51312e-05 2.407e-07 1.0864e-06 4.667e-07 0.0004985244 1.12025e-05 1.01966e-05 0.02873979 5.978e-07 0.6267409 3.3534e-06 0.343927</span></code></pre></div>
<p>Now that we have our placebo object, we can represent it graphically with <code>plot_placebos</code>. Here we can see our donors (control unit) and our actual treated group.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_placebos.html">plot_placebos</a></span>(placebo)</code></pre></div>
<div class="figure" style="text-align: center">
<img src="case-study_files/figure-html/unnamed-chunk-12-1.png" alt="Placebo Plot for Control Units" width="672"><p class="caption">
Placebo Plot for Control Units
</p>
</div>
<p>Equally important we can test the Mean Squared Prediction Error (MSPE). Additionally, because we generated the controls for the placebos, we can see how extreme our values are and thus generate a pseudo p-value to see if our results are significant. Now, it should be mentioned that this test is relatively underpowered as it looks only at the donor states.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mspe.test.html">mspe.test</a></span>(placebo)
test_out<span class="op">$</span>p.val
<span class="co">#&gt; [1] 0.6666667</span></code></pre></div>
<p>Why look at single number summary, when you can look at a plot? With <code>mspe.plot</code> we can visualise the ratios of MSPE for each donor. Here we see very little difference in Russia, which supports our higher p-value.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/mspe.plot.html">mspe.plot</a></span>(<span class="dt">tdf =</span> placebo)</code></pre></div>
<div class="figure" style="text-align: center">
<img src="case-study_files/figure-html/unnamed-chunk-14-1.png" alt="Mean Squared Prediction Error Ratios for Russia and Donors" width="672"><p class="caption">
Mean Squared Prediction Error Ratios for Russia and Donors
</p>
</div>
</div>
<div id="conclusion" class="section level1">
<h1 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h1>
<p>In the case of this study, it doesn’t look like the policy had an impact. However, this brings into question the model specification. The predictors in the model did not necessarily generate the best pre-treatment MSPE. Different predictors may help us better construct a Synthetic Russia. Additionally, this model could be tuned by including some lagged predictors. We won’t go into details regarding this process, but with SCtools, you now have tools to help you with your model inference and tuning.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Available at <a href="https://www.theguardian.com/world/2019/oct/01/russian-alcohol-consumption-down-40-since-2003-who" class="uri">https://www.theguardian.com/world/2019/oct/01/russian-alcohol-consumption-down-40-since-2003-who</a><a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Yes, we all know as good economists that as goods get more expensive, consumers will buy less of them. However, <em>how much less</em> is another question.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>I would recommend using the <code>plotly</code> package which allows you to hover over the different lines and see the country codes.<a href="#fnref3">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#implementing-synthetic-controls">Implementing Synthetic Controls</a><ul class="nav nav-pills nav-stacked">
<li><a href="#experimental-design">Experimental Design</a></li>
      </ul>
</li>
      <li><a href="#the-next-steps">The Next Steps</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bruno Castanho Silva, Michael DeWitt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
